{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-danger text-white">
            <h2>Promotion d'urgence d'administrateur</h2>
            <p class="mb-0">⚠️ Cette page n'est accessible qu'aux superutilisateurs</p>
        </div>
        <div class="card-body">
            <p>Sélectionnez un utilisateur à promouvoir au rôle d'administrateur :</p>

            {% if utilisateurs %}
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <select name="user_id" class="form-control">
                            {% for user in utilisateurs %}
                                <option value="{{ user.id }}">{{ user.username }} ({{ user.first_name }} {{ user.last_name }}) - Rôle actuel: {{ user.get_role_display }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-danger mt-3">Promouvoir en administrateur</button>
                </form>
            {% else %}
                <div class="alert alert-info">
                    Tous les utilisateurs sont déjà des administrateurs.
                </div>
            {% endif %}

            <div class="mt-3">
                <a href="{% url 'administration:liste_utilisateurs' %}" class="btn btn-secondary">Retour à la liste des utilisateurs</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
