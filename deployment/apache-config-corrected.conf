<VirtualHost *:80>
    ServerName observation-nids.meteo-poelley50.fr
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html

    # Configuration WSGI pour Django
    WSGIDaemonProcess Observations_Nids python-home=/var/www/html/Observations_Nids/.venv python-path=/var/www/html/Observations_Nids
    WSGIProcessGroup Observations_Nids
    WSGIScriptAlias / /var/www/html/Observations_Nids/observations_nids/wsgi.py

    # Fichiers statiques
    Alias /static/ /var/www/html/Observations_Nids/staticfiles/
    <Directory /var/www/html/Observations_Nids/staticfiles>
        Require all granted
    </Directory>

    # Fichiers media
    Alias /media/ /var/www/html/Observations_Nids/media/
    <Directory /var/www/html/Observations_Nids/media>
        Require all granted
    </Directory>

    # Permissions pour le fichier WSGI
    <Directory /var/www/html/Observations_Nids/observations_nids>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Redirection HTTP vers HTTPS
    RewriteEngine on
    RewriteCond %{SERVER_NAME} =observation-nids.meteo-poelley50.fr
    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
